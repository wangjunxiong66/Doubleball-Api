<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wjx.sportsplatformapi.dao.PoemDao"> <!--namespace对应是哪个dao文件，该文件下的操作对应此map文件的sql操作-->

    <insert id="addPoem">
        insert into poem(title,author,dynasty,category,content,comment,create_time,update_time) values(#{title},#{author},#{dynasty},#{category},#{content},#{comment},#{create_time},#{update_time}) ;
    </insert>
    <select id="getPoemCounts" resultType="java.lang.Integer">
        select count(content) from poem ;
    </select>
    <!--<select id="getAllPoem" resultType="com.wjx.sportsplatformapi.entity.Poem">-->
        <!--SELECT * FROM poem-->
        <!--<if test="content != null">-->
            <!--WHERE content LIKE  #{content}-->
        <!--</if>-->
        <!--LIMIT #{pageStart},#{pageSize}-->
    <!--</select>-->
    <select id="getAllPoem" parameterType="com.wjx.sportsplatformapi.entity.PoemQueryInfo" resultType="com.wjx.sportsplatformapi.entity.Poem">
        SELECT * FROM poem
        <where>
            <!--<if test="title != null "> title like #{title}</if>-->
            <!--<if test="author != null "> and author like #{author}</if>-->
            <!--<if test="dynasty != null "> and dynasty like #{dynasty}</if>-->
            <!--<if test="category != null "> and category like #{category} </if>-->
            <!--<if test="content != null "> and content like #{content} </if>-->
            <!--<if test="comment != null ">  and comment like #{comment}</if>-->
            <!--<if test="create_time != null "> and create_time = #{create_time}</if>-->
            <!--<if test="update_time != null "> and update_time = #{update_time}</if>-->
            <if test="title != null "> title like "%"#{title}"%"</if>
            <if test="author != null "> and author like "%"#{author}"%"</if>
            <if test="dynasty != null "> and dynasty like "%"#{dynasty}"%"</if>
            <if test="category != null "> and category like "%"#{category}"%" </if>
            <if test="content != null "> and content like "%"#{content}"%" </if>
            <if test="comment != null ">  and comment like "%"#{comment}"%"</if>
            <if test="create_time != null "> and create_time = #{create_time}</if>
            <if test="update_time != null "> and update_time = #{update_time}</if>
        </where>
        LIMIT #{pageStart},#{pageSize}
    </select>
    <select id="getupdatepoem" resultType="com.wjx.sportsplatformapi.entity.Poem">
        select * from poem WHERE id=#{id}
    </select>
    <update id="editPoem">
        UPDATE poem SET title=#{title},author=#{author},dynasty=#{dynasty},category=#{category},content=#{content},comment=#{comment},update_time=#{update_time} WHERE id=#{id}
    </update>
    <delete id="deletePoem">
        delete from poem where id=#{id}
    </delete>
</mapper>
